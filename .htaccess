# no cahce for root index redirection
<IfModule mod_expires.c>
  ExpiresActive on
  ExpiresByType text/html                 "access plus 0 seconds"
  ExpiresByType image/png                 "access plus 1 day"
  ExpiresByType image/jpg                 "access plus 1 day"
  ExpiresByType image/jpeg                "access plus 1 day"
  ExpiresByType text/css                  "access plus 1 day"
  ExpiresByType application/javascript    "access plus 1 day"
  ExpiresDefault                          "access plus 0 seconds"
</IfModule>


<IfModule mod_rewrite.c>
  RewriteEngine On

  RewriteCond "%{HTTP:Accept-Language}" ^zh
  RewriteCond %{HTTP_HOST} !cn
  RewriteCond %{HTTP_HOST} !static
  RewriteRule ^(.*)$ https://cn.dubbo.apache.org/$1 [L,R=301]

  RewriteCond %{SERVER_PORT} !^443$
  RewriteCond %{HTTP_HOST} !static
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  RewriteCond "%{HTTP:Accept-Language}" ^zh [NC]
  RewriteRule ^/?(index\.html)?$ "/zh-cn/index.html" [L,R=301]

  RewriteRule ^/?(index\.html)?$ "/en/index.html" [L,R=301]

  RewriteCond "%{HTTP:Accept-Language}" ^zh [NC]
  RewriteRule ^/?faq/?([\w\-/]+)?$ "/zh-cn/docs3-v2/java-sdk/faq/$1" [L,R=301]

  RewriteRule ^/?faq/?([\w\-/]+)?$ "/en/docs3-v2/java-sdk/faq/$1" [L,R=301]

  RewriteRule ^/?zh/([\s\S]*)?$ "/zh-cn/$1" [L,R=301]
</IfModule>
